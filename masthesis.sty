%-----------
% masthesis.sty
%-----------
% This package provides various new environments, commands and layouts that I
% found useful in writing my thesis.  To use any or all of these all you need
% to do is \usepackage{masthesis} in the preamble of your LaTeX document.  See
% thesis.tex for how this is done.  There are further comments below explaining
% each new command/environment etc.  Any questions or comments to George Stagg
% (george.stagg@newcastle.ac.uk).
%------------------------------------------------------------------------------
\newcommand{\correction}[1]{\textcolor{blue}{#1}}
%\newcommand{\correction}[1]{\textcolor{black}{#1}}
%------------------------------------------------------------------------------
% A titlepage - Adapted from a titlepage designed by Ashley Willis.  To use
% this titlepage in your thesis all you need is a line which says
% \phdtitle{title}{name}{image}{date}.  Any other changes can be made below.
\newcommand{\phdtitle}[4]{%
 \begin{titlepage}
   \begin{tabular}{c}
     \vspace{30mm}
   \end{tabular}
   \begin{center}
     \LARGE{\sc{#1}}\\
     \vspace{1.5cm}
     \Large{\sc{\hspace{2mm}#2}}
     \vspace{2cm}\\
     \Large{Thesis submitted for the degree of\\
     Doctor of Philosophy}
     \vspace{1cm}\\
     \begin{tabular}{c}
       \hspace{2mm}
       {\includegraphics[width=0.55\textwidth]{#3}}
     \end{tabular}
     \mbox{}
     \vspace{0.6cm}\\
     \emph{\small
       School of Mathematics, Statistics \& Physics\\
       Newcastle University\\
       Newcastle upon Tyne\\
       United Kingdom\\
     }
     \vspace{1cm}\Large{#4}\\
   \end{center}
 \end{titlepage}
}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% A new acknowledgements environment.  As far as I am aware LaTeX does not
% provide an acknowledgement environment; so here's one!  Just use
% \begin{acknowledgements}...\end{acknowledgements} as usual.
\makeatletter
\newenvironment{acknowledgements}{
  \titlepage\null\vfil
  \@beginparpenalty\@lowpenalty
  \begin{center}%
    \bfseries Acknowledgements \@endparpenalty\@M
  \end{center}%
  }{
  \par\vfil\null\endtitlepage
}
\makeatother
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% A dedication environment.  Use \begin{dedication}...\end{dedication}.  This
% will set aside a full page with italic text centred horizontally and
% vertically.
\makeatletter
\newenvironment{dedication}{
  \titlepage\null\vfil
  \begin{center}%
    \itshape
    }{
  \end{center}%
\par\vfil\null\endtitlepage
}
\makeatother
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% Provides dot-dashed lines.  There doesn't appear to be an easy way of making
% dotted or dashed lines in LaTeX, so here are some pre-defined linestyles.
\def\dashedrule#1#2#3#4#5{{%
	% #1 is length of first dash
	% #2 is length of gap between two consecutive first dashes
	% #3 is length of second dash
	% #4 is length of gap between two consecutive second dashes
	% #5 is number of dashes
	\dimen1=#2 \divide\dimen1 by 2
	\dimen2=#4 \divide\dimen2 by 2
	\def\@ruledash{%
		\rule{\dimen1}{0pt}%
		\rule[0.5ex]{#1}{0.4pt}%
		% line is 0.5ex above the baseline
		% and 0.4pt thick
		\rule{\dimen1}{0pt}%
		\rule{\dimen2}{0pt}%
		\rule[0.5ex]{#3}{0.4pt}%
		\rule{\dimen2}{0pt}}%
	\count1=0
	\loop%
	\ifnum\count1<#5%
	\advance\count1 by 1%
	\@ruledash%
\repeat}}

% These are the definitions.  You must say \protect\longdashes,
% \protect\shortdashes etc. in your document to get a short line of the
% specified style.  You can define more here if you want.  The length of a line
% segment is (#1+#2+#3+#4)*#5
\def\longdashes{\dashedrule{0.8em}{0.2em}{0.0em}{0.0em}{3}}
\def\mediumdashes{\dashedrule{0.3em}{0.2em}{0.0em}{0.0em}{6}}
\def\shortdashes{\dashedrule{0.1em}{0.1em}{0.0em}{0.0em}{15}}
\def\sparsedashes{\dashedrule{0.5em}{0.5em}{0.0em}{0.0em}{3}}
\def\solidline{\dashedrule{3em}{0.0em}{0.0em}{0.0em}{1}}
\def\dotdashline{\dashedrule{0.5em}{0.1em}{0.1em}{0.3em}{3}}
%------------------------------------------------------------------------------

% Any external packages that you require can be inserted here.
\usepackage[round]{natbib}                              % BiBTeX style
% If you would prefer APS style referencing, comment out the above line and instead use
% the line below.
%\usepackage[numbers,compress]{natbib}                  % BiBTeX style
\usepackage{comment}
\usepackage{fancyhdr}                                   % Fancy headers
\usepackage[centertags]{amsmath}                        % AMS Stuff
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{dcolumn}                                    % Line up at decimal point in a table
\usepackage{graphicx}                                   % Graphics stuff
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor} %Colours
\usepackage[small]{caption}                             % Captions
\usepackage{enumerate}                                  % Enumerated lists
\usepackage{mathrsfs}                                   % Serif fonts
\usepackage{longtable}                                  % Stretch tables
\usepackage{lscape}                                     % Landscape mode
\usepackage{afterpage}                                  % Clear a page
\usepackage[figuresright]{rotating}                     % Rotate a figure
\usepackage{setspace}                                   % Spacing tools
\usepackage{hyperref}
\usepackage{bm}
\usepackage{bbm}
\usepackage{booktabs}
\usepackage{subcaption}
\usepackage{caption}
\usepackage{enumitem}
\usepackage{float}
\usepackage[capitalise, noabbrev]{cleveref}
\usepackage{booktabs}
\usepackage{float}
\usepackage{titlesec}
\usepackage{mathtools}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{pgfplotstable}
\usepackage{pifont}
\usepackage{rotating}
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
% Distance to hang section and subsection numbers outside margins
\newlength\TitleOverhang
\setlength\TitleOverhang{2.5mm}
% Define titlehang to let sections etc protrude margin
\newcommand\titlehang[1]{%
    \llap{%
        #1\hspace{\TitleOverhang}
    }%
}
\titleformat{\section}%
  [block]% shape
  {\Large}% format applied to label+text
  {\titlehang\thesection}% label with titlehang
  {0em}% horizontal separation between label and title body
  {\textsl}% code before the title body
  []% after the title body
\titleformat{\subsection}%
  [block]% shape
  {\large}% format applied to label+text
  {\titlehang\thesubsection}% label with titlehang
  {0em}% horizontal separation between label and title body
  {\textsl}% before the title body
  []% after the title body
\titleformat{\subsubsection}%
  [block]% shape
  {\large}% format applied to label+text
  {}% label
  {0em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body
%get euro sign

\usepackage{textcomp}
\usepackage{eurosym}


\usepackage{tikz}

\usetikzlibrary{shapes, arrows}
%% tikz shit

\tikzstyle{cloud} = [draw, ellipse,fill=white, node distance=3.5cm,
    minimum height=2em]
\tikzstyle{line} = [draw, -latex']




%% macros %%
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\calX}{\mathcal{X}}
\newcommand{\bx}{\mathbf{x}}
\newcommand{\by}{\mathbf{y}}
\newcommand{\bz}{\mathbf{z}}
\newcommand{\bX}{\mathbf{X}}
\newcommand{\bY}{\mathbf{Y}}
\newcommand{\bZ}{\mathbf{Z}}
\newcommand{\yobs}{y_{\text{obs}}}
\newcommand{\btheta}{\bm{\theta}}
\newcommand{\bbeta}{\bm{\beta}}
\newcommand{\bphi}{\bm{\varphi}}
\newcommand{\iid}{\stackrel{\mathclap{\normalfont\mbox{iid}}}{\sim}}
\newcommand{\dbx}{\frac{\partial}{\partial \bx}}
\newcommand{\E}{\textrm{E}\,}
\newcommand{\cov}{\mathrm{Cov}\,}
\newcommand{\var}{\mathrm{Var}\,}
\newcommand{\p}{\mathrm{P}\,}
\newcommand{\diag}{\text{diag}\,}
\newcommand{\sd}{\mathrm{SD}\,}
\newcommand\indep{\protect\mathpalette{\protect\independenT}{\perp}}
    \def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}
\newcommand{\secref}[1]{Section \ref{#1}}
\newcommand{\dd}{\text{d}}
\newcommand{\logit}{\text{logit}\,}
\newcommand{\expit}{\text{expit}\,}
\newcommand{\probit}{\text{probit}\,}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\newcommand{\EI}{\textrm{EI}}
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand{\mathd}{\mathcal{D}}
\makeatletter
\let\amsmath@bigm\bigm
%% George Box counter
%\newcounter{georgecount}
%\newcommand{\georgebox}{\footnote{\stepcounter{georgecount} $\text{George Box count} =$ \arabic{georgecount}}}

\renewcommand{\bigm}[1]{%
  \ifcsname fenced@\string#1\endcsname
    \expandafter\@firstoftwo
  \else
    \expandafter\@secondoftwo
  \fi
  {\expandafter\amsmath@bigm\csname fenced@\string#1\endcsname}%
  {\amsmath@bigm#1}%
}

\newcommand{\DeclareFence}[2]{\@namedef{fenced@\string#1}{#2}}
\makeatother

\DeclareFence{\mid}{|}
% Some people like the palatino text/math fonts. Uncomment these lines to use them
\usepackage[T1]{fontenc}
\usepackage[sfdefault]{biolinum}
\usepackage{newpxtext}
\linespread{1.2}
%\usepackage[bigdelims,vvarbb]{newpxmath}
\usepackage[bigdelims]{newpxmath}
%\usepackage{pgfpages}
%\pgfpagesuselayout{2 on 1}[a4paper,landscape]
%----------------------------------------------------------------------------
% Fancy headers.  See the fancyhdr documentation of a full explanation of what
% these are.  R=Right hand side of page, L=Left hand side of page
\pagestyle{fancy}
\fancyhead[R]{\slshape\nouppercase\leftmark}
\fancyhead[L]{}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% Make all upper-case Greek letters slanted.  Just comment these if you prefer
% upright Greek letters.
\DeclareMathSymbol{\Gamma}{\mathalpha}{letters}{"00}
\DeclareMathSymbol{\Delta}{\mathalpha}{letters}{"01}
\DeclareMathSymbol{\Theta}{\mathalpha}{letters}{"02}
\DeclareMathSymbol{\Lambda}{\mathalpha}{letters}{"03}
\DeclareMathSymbol{\Xi}{\mathalpha}{letters}{"04}
\DeclareMathSymbol{\Pi}{\mathalpha}{letters}{"05}
\DeclareMathSymbol{\Sigma}{\mathalpha}{letters}{"06}
\DeclareMathSymbol{\Upsilon}{\mathalpha}{letters}{"07}
\DeclareMathSymbol{\Phi}{\mathalpha}{letters}{"08}
\DeclareMathSymbol{\Psi}{\mathalpha}{letters}{"09}
\DeclareMathSymbol{\Omega}{\mathalpha}{letters}{"0A}
%------------------------------------------------------------------------------

\font\sfs = cmssi10 % sans-serif slanted
\font\sfb = cmssi10 % sans-serif bold maths
\font\sls = cmssi10 % sans-serif bold maths, italic

%------------------------------------------------------------------------------
% Various miscellaneous new commands.
\newcommand\etc{etc.\ }
\newcommand\eg{e.g.\ }
\newcommand\ie{i.e.\ }

%------------------------------------------------------------------------------
% Theorems, corollaries, etc.
% Here, theorems, lemmas, corollaries, and propositions are numbered within
% chapters; proofs, definitions, examples, and remarks are not numbered.  Just
% alter the commands below if you would prefer different numberings or no
% numbering at all.

% Numbered.
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{proposition}{Proposition}[chapter]

% Not numbered.
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\theoremstyle{definition}
\newtheorem*{example}{Example}
\theoremstyle{definition}
\newtheorem*{remark}{Remark}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% For multiletter symbols.
\newcommand\Real{\mbox{Re}} % Real
\newcommand\Imag{\mbox{Im}} % Imaginary
\newcommand{\Rey}{\mbox{\ensuremath{\mathit{Re}}}}  % Reynolds number
\newcommand{\Ha}{\mbox{\ensuremath{\mathit{Ha}}}}   % Hartmann number
\newcommand{\Ta}{\mbox{\ensuremath{\mathit{Ta}}}}   % Taylor number
\newcommand{\Pran}{\mbox{\ensuremath{\mathit{Pr}}}} % Prandtl number
\newcommand{\Pen}{\mbox{\ensuremath{\mathit{Pe}}}}  % Peclet number
\newcommand\Ai{\mbox{Ai}} % Airy function
\newcommand\Bi{\mbox{Bi}} % Airy function
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% Array strut to make delimiters come out right size both ends.
\newsavebox{\astrutbox}
\sbox{\astrutbox}{\rule[-5pt]{0pt}{20pt}}
\newcommand{\astrut}{\usebox{\astrutbox}}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
% Make latex more willing to fill a page with large floats and small
% amounts of text.
\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.9}
\renewcommand{\bottomfraction}{0.9}
\renewcommand{\floatpagefraction}{0.8}
%------------------------------------------------------------------------------
% prevent footnotes from spanning more than one page
\interfootnotelinepenalty=10000
